<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="7 Usage considerations" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://arm-software.github.io/psa-api/crypto/1.3/overview/usage.html" />
<link rel="canonical" href="https://arm-software.github.io/psa-api/crypto/1.3/overview/usage.html" />
<meta property="og:site_name" content="PSA Certified Crypto API 1.3" />
<meta property="og:description" content="Security recommendations: Always check for errors: Most functions in the Crypto API can return errors. All functions that can fail have the return type psa_status_t. A few functions cannot fail, an..." />
<meta name="description" content="Security recommendations: Always check for errors: Most functions in the Crypto API can return errors. All functions that can fail have the return type psa_status_t. A few functions cannot fail, an..." />

    <title>7 Usage considerations &#8212; PSA Certified Crypto API 1.3</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=f6a572b4" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="preconnect" type="text/css" href="https://fonts.googleapis.com" />
    <link rel="preconnect" type="text/css" href="https://fonts.gstatic.com" />
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,400;0,700;1,400&display=swap" />
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400;700&display=swap" />
    <script src="../_static/documentation_options.js?v=96647119"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="8 Library management reference" href="../api/library/index.html" />
    <link rel="prev" title="6 Implementation considerations" href="implementation.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/Arm_logo_blue_RGB.svg" alt="Logo of PSA Certified Crypto API"/>
            </a></p><hr />
<h3><a href="../index.html"><b>PSA Certified<br />Crypto API</b></a></h3>
IHI 0086<br/>
Non-confidential<br/>
Version 1.3.0
<hr />
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About this document</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">1 Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="goals.html">2 Design goals</a></li>
<li class="toctree-l1"><a class="reference internal" href="functionality.html">3 Functionality overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="sample-arch.html">4 Sample architectures</a></li>
<li class="toctree-l1"><a class="reference internal" href="conventions.html">5 Library conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementation.html">6 Implementation considerations</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">7 Usage considerations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#security-recommendations">7.1 Security recommendations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#always-check-for-errors">7.1.1 Always check for errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#shared-memory-and-concurrency">7.1.2 Shared memory and concurrency</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cleaning-up-after-use">7.1.3 Cleaning up after use</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/library/index.html">8 Library management reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/keys/index.html">9 Key management reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/ops/index.html">10 Cryptographic operation reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendix/example_header.html">A Example header file</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/encodings.html">B Algorithm and key type encoding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/specdef_values.html">C Example macro implementations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/sra.html">D Security Risk Assessment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/history.html">E Changes to the API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../atg_c-identifiers.html">Index of API elements</a></li>
</ul>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="usage-considerations">
<span id="id1"></span><h1><span class="section-number">7 </span>Usage considerations<a class="headerlink" href="#usage-considerations" title="Link to this heading">¶</a></h1>
<section id="security-recommendations">
<h2><span class="section-number">7.1 </span>Security recommendations<a class="headerlink" href="#security-recommendations" title="Link to this heading">¶</a></h2>
<section id="always-check-for-errors">
<h3><span class="section-number">7.1.1 </span>Always check for errors<a class="headerlink" href="#always-check-for-errors" title="Link to this heading">¶</a></h3>
<p>Most functions in the Crypto API can return errors. All functions that can fail have
the return type <code class="docutils literal notranslate"><span class="pre">psa_status_t</span></code>. A few functions cannot fail, and thus, return
<code class="docutils literal notranslate"><span class="pre">void</span></code> or some other type.</p>
<p>If an error occurs, unless otherwise specified, the content of the output
parameters is undefined and must not be used.</p>
<p>Some common causes of errors include:</p>
<ul class="simple">
<li><p>In implementations where the keys are stored and processed in a separate
environment from the application, all functions that need to access the
cryptography processing environment might fail due to an error in the
communication between the two environments.</p></li>
<li><p>If an algorithm is implemented with a hardware accelerator, which is
logically separate from the application processor, the accelerator might fail,
even when the application processor keeps running normally.</p></li>
<li><p>Most functions might fail due to a lack of resources. However, some
implementations guarantee that certain functions always have sufficient
memory.</p></li>
<li><p>All functions that access persistent keys might fail due to a storage failure.</p></li>
<li><p>All functions that require randomness might fail due to a lack of entropy.
Implementations are encouraged to seed the random generator with sufficient
entropy during the execution of <a class="reference internal" href="../api/library/library.html#c.psa_crypto_init" title="psa_crypto_init"><code class="xref any atg_c atg_c-ref docutils literal notranslate"><span class="pre">psa_crypto_init()</span></code></a>. However, some security
standards require periodic reseeding from a hardware random generator, which
can fail.</p></li>
</ul>
</section>
<section id="shared-memory-and-concurrency">
<h3><span class="section-number">7.1.2 </span>Shared memory and concurrency<a class="headerlink" href="#shared-memory-and-concurrency" title="Link to this heading">¶</a></h3>
<p>Some environments allow applications to be multithreaded, while others do not.
In some environments, applications can share memory with a different security
context. In environments with multithreaded applications or shared memory,
applications must be written carefully to avoid data corruption or leakage. This
specification requires the application to obey certain constraints.</p>
<p>In general, the Crypto API allows either one writer or any number of simultaneous
readers, on any given object. In other words, if two or more calls access the
same object concurrently, then the behavior is only well-defined if all the
calls are only reading from the object and do not modify it. Read accesses
include reading memory by input parameters and reading keystore content by using
a key. For more details, refer to <a class="reference internal" href="conventions.html#concurrency"><span class="secref">Concurrent calls</span></a>.</p>
<p>If an application shares memory with another security context, it can pass
shared memory blocks as input buffers or output buffers, but not as non-buffer
parameters. For more details, refer to <a class="reference internal" href="conventions.html#stability-of-parameters"><span class="secref">Stability of parameters</span></a>.</p>
</section>
<section id="cleaning-up-after-use">
<h3><span class="section-number">7.1.3 </span>Cleaning up after use<a class="headerlink" href="#cleaning-up-after-use" title="Link to this heading">¶</a></h3>
<p>To minimize impact if the system is compromised, it is recommended that
applications wipe all sensitive data from memory when it is no longer used. That
way, only data that is currently in use can be leaked, and past data is not
compromised.</p>
<p>Wiping sensitive data includes:</p>
<ul class="simple">
<li><p>Clearing temporary buffers in the stack or on the heap.</p></li>
<li><p>Aborting operations if they will not be finished.</p></li>
<li><p>Destroying keys that are no longer used.</p></li>
</ul>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169; 2018-2025 Arm Limited and/or its affiliates.
      
    </div>

    

    
  </body>
</html>